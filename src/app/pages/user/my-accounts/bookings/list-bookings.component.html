<app-cart-loader *ngIf="upComingloading"></app-cart-loader>

<div class="booking_whole_wrapper">
  <div class="container">
    <div class="booking_inner_container">
      <div class="search_wrapper">
        <input type="text" placeholder="Search" />
      </div>
      <h3>
        Upcoming
      </h3>
      <div class="accordion_up_wrapper" *ngIf="!upComingloading">
        <div id="accordion_upcoming">
          <div class="card" *ngFor="let booking of upComingbookings; let i = index;">
            <div class="card-header">
              <a class="card-link" data-toggle="collapse" aria-expanded="true" [href]="'#upcoming'+i">
                <span class="header_image">
                  <span class="title_image">
                    <img src="{{s3BucketUrl}}assets/images/icon/tabicons/flight.svg" alt="Flight icon" />
                  </span>
                </span>
                <div class="headerin_wrapper">
                  <div class="header_second_sec">
                    <div class="header_upper_wrper">
                      <div class="header_name">
                          {{ booking.booking[0]?.moduleInfo[0]?.departure_code }} to {{booking.booking[0]?.moduleInfo[0]?.arrival_code}}… 
                      </div>
                      <div class="book_id">
                        Booking ID {{ booking.laytripCartId}}
                      </div>
                      <div class="date_head">
                        {{commonFunction.convertDateFormat(booking.checkInDate,'YYYY-MM-DD')}} 
                      </div>
                    </div>
                    <div class="header_lower_wrper" *ngIf="booking.cartInstallments?.length > 0">
                      <div class="pricer_wrp">
                        <span class="pink_price">
                          ${{ booking.paidAmount | number : '1.2-2' }}
                        </span>
                        <div class="status">
                          Paid
                        </div>
                      </div>
                      <div class="payment_bar_wrps">
                        <div class="progress">
                          <div class="progress-bar" role="progressbar" style="width: 25%" aria-valuenow="25"
                            aria-valuemin="0" aria-valuemax="100"></div>
                        </div>
                        <div class="payment_status">
                          Next Payment {{ (booking.nextInstallmentDate != '' && booking.nextInstallmentDate  != null) ? commonFunction.convertDateFormat(booking.nextInstallmentDate,'YYYY-MM-DD') : ''}} 
                        </div>
                      </div>
                      <div class="pricer_wrp">
                        <span class="pink_price">
                          ${{ booking.remainAmount | number : '1.2-2' }}
                        </span>
                        <div class="status">
                          Due
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </a>
            </div>
            
            <div [id]="'upcoming'+i" class="collapse show " data-parent="#accordion_upcoming">
              <div class="accordion_data">
                <ul class="nav nav-tabs booking_tab_header">
                  <ng-container *ngFor="let cartItem of booking.booking;let j = index;">
                    <li>
                      <a data-toggle="tab" [href]="'#cart_item'+j" class="nav-link active">
                        <span class="tab_round_wrps" *ngIf="cartItem.moduleId==1">
                          <img src="{{s3BucketUrl}}assets/images/icon/tabicons/flight.svg" alt="Flight icon" />
                          <span class="tab_txt_head">{{cartItem.moduleInfo[0].departure_code}}-{{cartItem.moduleInfo[0].arrival_code}}</span>
                        </span>
                      </a>
                    </li>
                  </ng-container>
                </ul>
                <div class="tab-content main_tab_content">
                  <ng-container *ngFor="let cartItem of booking.booking;let j = index;">
                    <div class="tab-pane active" [id]="'cart_item'+j">
                      <app-flights *ngIf="cartItem.moduleId==1" [cartItem]="booking" ></app-flights>
                    </div>
                  </ng-container>                  
                </div>
              </div>              
              <app-cart-price-summary [cartItem]="booking"></app-cart-price-summary>
            </div>            
          </div>
        </div>
      </div>
      <h3>Completed</h3>
      <div class="accordion_up_wrapper">
        <div id="accordion_completed">
          <div class="card"  *ngFor="let booking of completeBookings; let i = index;">
            <div class="card-header">
              <a class="card-link" data-toggle="collapse" aria-expanded="true" [href]="'#completed'+i">
                <span class="header_image">
                  <span class="title_image">
                    <img src="{{s3BucketUrl}}assets/images/icon/tabicons/flight.svg" alt="Flight icon" />
                  </span>
                </span>
                <div class="headerin_wrapper">
                  <div class="header_second_sec">
                    <div class="header_upper_wrper">
                      <div class="header_name">
                        {{ booking.booking[0]?.moduleInfo[0]?.departure_code }} to {{booking.booking[0]?.moduleInfo[0]?.arrival_code}}… 
                      </div>
                      <div class="book_id">
                        Booking ID {{booking.laytripCartId}}
                      </div>
                      <div class="date_head">
                        {{commonFunction.convertDateFormat(booking.checkInDate,'YYYY-MM-DD')}} 
                      </div>
                    </div>
                  </div>
                </div>
              </a>
            </div>
            <div [id]="'completed'+i" class="collapse show" data-parent="#accordion_completed">
              <div class="accordion_data">
                <ul class="nav nav-tabs booking_tab_header">
                  <ng-container *ngFor="let cartItem of booking.booking;let j = index;">
                    <li>
                      <a data-toggle="tab" [href]="'#completed_item'+j" class="nav-link active">
                        <span class="tab_round_wrps">
                          <img src="{{s3BucketUrl}}assets/images/icon/tabicons/flight.svg" alt="Flight icon" />
                          <span class="tab_txt_head">{{cartItem.moduleInfo[0].departure_code}}-{{cartItem.moduleInfo[0].arrival_code}}</span>
                        </span>
                      </a>
                    </li>                 
                  </ng-container>
                </ul>
                <div class="tab-content main_tab_content">
                  <ng-container *ngFor="let cartItem of booking.booking;let j = index;">
                    <div class="tab-pane active" [id]="'completed_item'+j">
                      <app-flights *ngIf="cartItem.moduleId==1" [cartItem]="booking" ></app-flights>
                    </div>
                  </ng-container>                  
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>