<div *ngIf="!isPaymentCalulcatorLoading">
  <h3>Choose How You Pay</h3>
  <div class="payment_accordion">
    <div class="payment_mode_header" >
      <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':paymentType=='instalment'}"
        [disabled]="isBelowMinimumInstallment" (click)="togglePaymentMode('instalment')">Installments</button>

      <div class="section_description" *ngIf="show30DayMinValidation">
        <span class="sec_text">Installments not available under 30 days before travel.</span>
        <a (click)="hideBelow30DayMinError()" ><img src="{{s3BucketUrl}}assets/images/close_pink.svg" alt="Close"></a>
      </div>
 
      <div class="section_description second_pop" *ngIf="showPartialAndFullPaymentMixValidation">
        <span class="sec_text">Your first booking is less than 30 days before travel. This booking and any additional bookings in this checkout will not be available in installments.</span>
        <a (click)="hidePartialAndFullPaymentMixError()" ><img src="{{s3BucketUrl}}assets/images/close_pink.svg" alt="Close"></a>
      </div>

      
      <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':paymentType=='no-instalment'}"
        (click)="togglePaymentMode('no-instalment')">Full Payment</button>
    </div>

    <div class="inner_accordion">
      <app-redeem-laycredit-loader *ngIf="isLayCreditLoading">
      </app-redeem-laycredit-loader>

      <app-redeem-laycredit redeemableLayPoints={{sellingPrice}} sellingPrice={{sellingPrice}}
        (applyLaycredit)="applyLaycredit($event)" [totalLaycreditPoints]="totalLaycreditPoints"></app-redeem-laycredit>
      <h3 *ngIf="paymentType=='instalment' && instalmentAvavible">Downpayment Options</h3>
      <div class="flex_center_wrapper" *ngIf="paymentType=='instalment' && instalmentAvavible">
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':selectedDownPaymentIndex==0}"
          (click)="toggleDownPayment(0)">${{downPayments[0] | number : '1.2-2' }}
          <span class="min_text">Minimum</span>
        </button>
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':selectedDownPaymentIndex==1}"
          (click)="toggleDownPayment(1)">${{downPayments[1] | number : '1.2-2' }}</button>
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':selectedDownPaymentIndex==2}"
          (click)="toggleDownPayment(2)">${{downPayments[2] | number : '1.2-2' }}</button>
      </div>

      <h3 *ngIf="paymentType=='instalment' && instalmentAvavible">Installment Payment Options</h3>
      <div class="flex_center_wrapper" *ngIf="paymentType=='instalment' && instalmentAvavible">
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':instalmentType=='weekly'}"
          (click)="togglePaymentFrequency('weekly')" [disabled]="weeklyInstalment < 5">
          <span> Weekly</span> ${{weeklyInstalment |
          number : '1.2-2' }}</button>
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':instalmentType=='biweekly'}"
          (click)="togglePaymentFrequency('biweekly')" [disabled]="biWeeklyInstalment < 5">
          <span>Bi-Weekly</span> ${{biWeeklyInstalment
          | number : '1.2-2' }}</button>
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':instalmentType=='monthly'}"
          (click)="togglePaymentFrequency('monthly')" [disabled]="montlyInstalment < 5">
          <span>Monthly</span> ${{montlyInstalment |
          number : '1.2-2' }}</button>
      </div>

      <small *ngIf="paymentType=='instalment'" class="pay_alerts">All items in cart will be billed together as one plan of either Weekly or Bi-Weekly or Monthly payments.</small>
    </div> 
  </div>
</div>