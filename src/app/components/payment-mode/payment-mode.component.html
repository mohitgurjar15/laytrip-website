
<div *ngIf="instalmentAvavible && !isPaymentCalulcatorLoading">
  <h3>Choose How You Pay</h3>     
  <div class="payment_accordion">
    <div class="payment_mode_header">
      <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':paymentType=='instalment'}"
        [disabled]="isBelowMinimumInstallment" (click)="togglePaymentMode('instalment')">Installments</button>
      <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':paymentType=='no-instalment'}"
        (click)="togglePaymentMode('no-instalment')">Full Payment</button>
    </div>

    <div *ngIf="paymentType=='instalment'" class="inner_accordion">
      <app-redeem-laycredit-loader *ngIf="isLayCreditLoading">
      </app-redeem-laycredit-loader>
      
      <app-redeem-laycredit  redeemableLayPoints={{sellingPrice}} sellingPrice={{sellingPrice}} (applyLaycredit)="applyLaycredit($event)"
        [totalLaycreditPoints]="totalLaycreditPoints"></app-redeem-laycredit>
      <h3>Downpayment Options</h3>
      <div class="flex_center_wrapper">
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':selectedDownPaymentIndex==0}"
          (click)="toggleDownPayment(0)">${{downPayments[0] | number : '1.2-2' }}
          <span class="gray_text">Minimum</span>
        </button>
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':selectedDownPaymentIndex==1}"
          (click)="toggleDownPayment(1)">${{downPayments[1] | number : '1.2-2' }}</button>
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':selectedDownPaymentIndex==2}"
          (click)="toggleDownPayment(2)">${{downPayments[2] | number : '1.2-2' }}</button>
      </div>

      <h3>Installment Payment Options</h3>
      <div class="flex_center_wrapper">
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':instalmentType=='weekly'}"
          (click)="togglePaymentFrequency('weekly')" [disabled]="weeklyInstalment < 5">
          <span> Weeky</span> ${{weeklyInstalment |
          number : '1.2-2' }}</button>
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':instalmentType=='biweekly'}"
          (click)="togglePaymentFrequency('biweekly')" [disabled]="biWeeklyInstalment < 5">
          <span>Biweeky</span> ${{biWeeklyInstalment
          | number : '1.2-2' }}</button>
        <button type="button" class="btn_accrodion" [ngClass]="{'current_active_btn':instalmentType=='monthly'}"
          (click)="togglePaymentFrequency('monthly')" [disabled]="montlyInstalment < 5">
          <span>Monthly</span> ${{montlyInstalment |
          number : '1.2-2' }}</button>
      </div>
    </div>
    <!-- <h3>Break Down</h3>
    <ul class="list-group">
      <li class="list-group-item d-flex justify-content-between align-items-center">
        Total Price
        <span class="badge badge-primary badge-pill">${{sellingPrice | number : '1.2-2'}}</span>
      </li>
      <li *ngIf="laycreditpoints>0" class="list-group-item d-flex justify-content-between align-items-center">
        Applied points
        <span class="badge badge-primary badge-pill">{{laycreditpoints | number : '1.2-2' }}</span>
      </li>
      <li class="list-group-item d-flex justify-content-between align-items-center">
        Total Due
        <span class="badge badge-primary badge-pill">${{remainingAmount | number : '1.2-2'}}</span>
      </li>

      <li *ngIf="paymentType=='instalment'" class="list-group-item d-flex justify-content-between align-items-center">
        As ${{instalments.instalment_date[0].instalment_amount | number : '1.2-2'}} Down and
        ${{instalments.instalment_date[1].instalment_amount | number : '1.2-2'}}/installment for
        {{instalments.instalment_date.length-1}} installments
        <div class="dropdown">
          <button type="button" class="btn btn-primary dropdown-toggle" data-toggle="dropdown">
            Installment list
          </button>
          <div class="dropdown-menu" *ngIf="instalments">
            <ng-container *ngFor="let instalment of instalments.instalment_date">
              <a class="dropdown-item" href="#">Date: {{instalment.instalment_date}}=>{{instalment.instalment_amount |
                number : '1.2-2'}}</a>
            </ng-container>
          </div>
        </div>
      </li>

    </ul> -->
  </div>
</div>

<!-- <div class="pay_summery_wrapper">
  <h3>Payment Summary</h3>
  <div class="pay_sum_inner">
    <div class="pay_list_wrper">
      <div class="pay_listing">
        <span>Downpayment Itinerary 1</span>
        <span>$60</span>
      </div>
      <div class="pay_listing">
        <span>Full Price Itinerary 2</span>
        <span>$60</span>
      </div>
      <div class="pay_listing">
        <span>Downpayment Itinerary 3</span>
        <span>$60</span>
      </div>
      <div class="pay_listing">
        <span>Downpayment Itinerary 4</span>
        <span>$60</span>
      </div>
      <div class="pay_listing">
        <span>Add-ons</span>
        <span>$60</span>
      </div>
      <div class="pay_listing">
        <span>Applied Laytrip Points</span>
        <span>-$60</span>
      </div>
    </div>
    <div class="price_accordion" id="price_collapse">
      <div class="card">
        <div class="card-header" id="headingOne">
          <button class="card_header_btn" type="button" data-toggle="collapse" data-target="#collapseOne"
            aria-expanded="true" aria-controls="collapseOne">
            Total Due Now
            <span>$460</span>
          </button>
        </div>
        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#price_collapse">
          <div class="card-body">
            <div class="pay_sap_setions">
              <h3>Installments Itinerary 1</h3>
              <div class="due_details">
                <span>Due Jan 1, 2021</span>
                <span>$30</span>
              </div>
            </div>
            <div class="pay_sap_setions">
              <h3>Installments Itinerary 3</h3>
              <div class="due_details">
                <span>Due Jan 1, 2021</span>
                <span>$30</span>
              </div>
              <div class="due_details">
                <span>Due Jan 1, 2021</span>
                <span>$30</span>
              </div>
            </div>
            <div class="pay_sap_setions">
              <h3>Installments Itinerary 4</h3>
              <div class="due_details">
                <span>Due Jan 1, 2021</span>
                <span>$30</span>
              </div>
              <div class="due_details">
                <span>Due Jan 1, 2021</span>
                <span>$30</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div> -->

<div class="pay_summery_wrapper" *ngIf="paymentType=='instalment'">
  <h3>Payment Summary</h3>
  <div class="pay_sum_inner">
    <div class="pay_list_wrper">
      <div class="pay_listing">
        <span>Downpayment</span>
        <span>${{instalments.instalment_date[0].instalment_amount | number : '1.2-2'}}</span>
      </div>
      
      <!-- <div class="pay_listing">
        <span>Add-ons</span>
        <span>$60</span>
      </div> -->
      <div class="pay_listing" *ngIf="laycreditpoints>0">
        <span>Applied Laytrip Points</span>
        <span>-${{laycreditpoints | number : '1.2-2' }} </span>
      </div>
    </div>
    <div class="price_accordion" id="price_collapse">
      <div class="card">
        <div class="card-header" id="headingOne">
          <button class="card_header_btn" type="button" data-toggle="collapse" data-target="#collapseOne"
            aria-expanded="true" aria-controls="collapseOne">
            Total Due Now
            <span>${{remainingAmount | number : '1.2-2'}}</span>
          </button>
        </div>
        <div id="collapseOne" class="collapse show" aria-labelledby="headingOne" data-parent="#price_collapse">
          <div class="card-body">
            <div class="pay_sap_setions">
              <h3>Installments</h3>
              <div class="due_details" *ngFor="let instalment of instalments.instalment_date | slice:1">
                <span>Due {{commonFunction.convertDateFormat(instalment.instalment_date,'YYYY-MM-DD') }}</span>
                <span>${{instalment.instalment_amount |
                  number : '1.2-2'}}</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>



