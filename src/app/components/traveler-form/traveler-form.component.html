<form [formGroup]="travelerForm"  (ngSubmit)="submit(travelerForm.value)">
  <div *ngIf="travelers.type0.adults.length>0 && cartNumber==0" formGroupName="type0">
    <div formArrayName="adults">
      <div id="accordion" class="accordion_bookings">
        <div class="card" *ngFor="let traveler of travelerForm.get('type0.adults')['controls']; let x = index">
          <div class="card-header" (click)="selectTravelerNumber($event,x)">
            <a class="card-link" data-toggle="collapse" [href]="'#adult_collapse'+x" aria-expanded="false">
              Booking Traveler {{x+1}}
            </a>
          </div>
          <div [id]="'adult_collapse'+x" (mouseenter)="selectTravelerNumber($event,x)"  class="collapse show"  data-parent="#accordion">
            <div class="card-body">
              <div class="sub_cat_wrapper">
                <button (click)="selectTravelerType('adult',x)" class="add_btn_lined">Add Adult (Over 12)
                  <a *ngIf="traveler.controls.type.value=='adult'" href="javascript:void(0);" class="close_icon">
                    <i class="fa fa-times"></i>
                  </a>
                </button>
                <button (click)="selectTravelerType('child',x)" class="add_btn_lined">Add Child (2-12)
                  <a *ngIf="traveler.controls.type.value=='child'" href="javascript:void(0);" class="close_icon">
                    <i class="fa fa-times"></i>
                  </a>
                </button>
                <button (click)="selectTravelerType('infant',x)" class="add_btn_lined">Add Infant (Under 12)
                  <a *ngIf="traveler.controls.type.value=='infant'" href="javascript:void(0);" class="close_icon">
                    <i class="fa fa-times"></i>
                  </a>
                </button>
              </div>
              <app-my-traveler travelerId={{travelers.type0.adults[traveler_number].userId}} traveler_type={{traveler.controls.type.value}} traveler_number={{x}}></app-my-traveler>

              <div [formGroupName]="x" class="common_form">
                <div class="form-row">
                  <div class="col-sm-12 col-md-4 mb-sm-10 ">
                    <label for="">First Name*</label>
                    <input type="text" class="form-control" placeholder="Name" formControlName="first_name">
                    <div *ngIf="traveler.controls.first_name.touched && traveler.controls.first_name.errors"
                      class="error">
                      <small *ngIf="traveler.controls.first_name.errors.required" class="error_field">Please enter your
                        first name.</small>
                    </div>
                  </div>
                  <div class="col-sm-12 col-md-4 mb-sm-10">
                    <label for="">Last Name*</label>
                    <input type="text" class="form-control" placeholder="Name" formControlName="last_name">
                    <div *ngIf="traveler.controls.last_name.touched && traveler.controls.last_name.errors"
                      class="error">
                      <small *ngIf="traveler.controls.last_name.errors.required" class="error_field">Please enter your
                        last name.</small>
                    </div>
                  </div>
                  <div class="col-sm-12 col-md-4 mb-sm-10">
                    <label for="">Gender*</label>
                    <select class="form-control" formControlName="gender">
                      <option value="M">Male</option>
                      <option value="F">Female</option>
                    </select>
                    <!-- <div class="gender_anchers">
                      <a href="javascript:void(0);">Male</a>
                      <a href="javascript:void(0);">Female</a>
                      <a href="javascript:void(0);">Other</a>
                    </div> -->
                    <div *ngIf="traveler.controls.gender.touched && traveler.controls.gender.errors" class="error">
                      <small *ngIf="traveler.controls.gender.errors.required" class="error_field">Please select your
                        gender.</small>
                    </div>
                  </div>
                  <div class="col-sm-12 col-md-4 mb-sm-10"
                    *ngIf="traveler.controls.type.value=='' || traveler.controls.type.value=='adult'">
                    <label for="">Email*</label>
                    <input type="email" class="form-control" placeholder="Email" formControlName="email">
                    <div *ngIf="traveler.controls.email.touched && traveler.controls.email.errors" class="error">
                      <small *ngIf="traveler.controls.email.errors.required" class="error_field">Please enter your email
                        address.</small>
                    </div>
                  </div>
                  <div class="col-sm-12 col-md-4 mb-sm-10 telephone_wrps" *ngIf="traveler.controls.type.value=='' || traveler.controls.type.value=='adult'">
                    <label for="">Phone*</label>
                    <span class="tel_span">
                      <input type="text" class="form-control" placeholder="+00" maxlength="6"
                        formControlName="country_code">
                        <!-- <ng-select [items]="countries" 
                        bindLabel="phonecode" 
                        bindValue="phonecode"
                        formControlName="country_code"
                        ></ng-select>-->
                      <input type="text" class="form-control" placeholder="000000000" maxlength="10"
                        formControlName="phone_no">
                    </span>
                    <div *ngIf="traveler.controls.phone_no.touched && traveler.controls.phone_no.errors"
                      class="error">
                      <small *ngIf="traveler.controls.phone_no.errors.required" class="error_field">Please enter
                        your telephone number.</small>
                    </div>
                  </div>
                  <div class="col-sm-12 dobs col-md-4 mb-sm-10">
                    <label for="">Date of birth*</label>
                    <!-- <input type="text" class="form-control" placeholder="Date of birth" formControlName="dob"> -->
                    <p-calendar class="account_datepicker" dateFormat="M d, yy" tabindex="3" panelStyleClass="birth_date"
                    inputId="basic" formControlName="dob" placeholder="{{'dob_placeholder' | translate}}"
                    [maxDate]="dobMaxDate" [yearNavigator]="true" [monthNavigator]="true" yearRange="1970:2020"
                    [defaultDate]="dobMaxDate" panelStyleClass="calender-price-view" (onSelect)=changeDateOfBirth($event)>
                </p-calendar>
                  </div>
                  <div class="col-sm-12 col-md-4 mb-sm-10" *ngIf="travelers.type0?.adults[x]?.passport_number">
                    <label for="">Passport number</label>
                    <input type="text" class="form-control" placeholder="Passport number"
                      formControlName="passport_number">
                  </div>
                  <div class="col-sm-12 col-md-4 nation_wrps">
                    <label for="">Nationality*</label>
                    <!-- <input type="text" class="form-control" placeholder="Nationality" formControlName="country"> -->
                    <ng-select [items]="countries" 
                              bindLabel="name" 
                              bindValue="id"
                              formControlName="country_id"
                              >
                    </ng-select>
                  </div>
                </div>
              </div>

              <div id="accordion_add" class="accordion_addn">
                <div class="card">
                  <div class="card-header">
                    <span class="heade_wrps">
                      Add-Ons
                      <a data-toggle="collapse" data-parent="#accordion_add" href="#add_acord"
                        class="addon_anchor responsive_anch" aria-expanded="true" aria-controls="add_acord">
                      </a>
                    </span>
                    <ul class="nav nav-pills" id="addon_tab" role="tablist">
                      <li class="nav-item" role="presentation">
                        <a class="nav-link active" id="baggage-tab" data-toggle="tab" href="#baggage" role="tab"
                          aria-controls="baggage" aria-selected="true">Baggage</a>
                      </li>                                                                                                                                 
                    </ul>
                    <a data-toggle="collapse" data-parent="#accordion_add" href="#add_acord" class="addon_anchor"
                      aria-expanded="true" aria-controls="add_acord">
                    </a>
                  </div>
                  <div id="add_acord" class="collapse show" data-parent="#accordion_add">
                    <div class="card-body">
                      <div class="tab-content" id="addon_tabContent">
                        <div class="tab-pane fade show active" id="baggage" role="tabpanel"
                          aria-labelledby="baggage-tab">
                          <div class="addon_listins_wrps">
                            <!-- <button class="addon_btn_drop" type="button" id="dropdownMenu2" data-toggle="dropdown"
                              aria-expanded="false">
                              Total Weight: Check-in baggage - up to 3lb || 16.39 USD
                            </button>
                            <ul class="dropdown-menu dropdownList" aria-labelledby="dropdownMenu2">
                              <li><button class="dropdown-item" type="button">Total Weight: Check-in baggage - up to 3lb
                                  || 16.39 USD</button></li>
                              <li><button class="dropdown-item" type="button">Total Weight: Check-in baggage - up to 4lb
                                  || 18.39 USD</button></li>
                              <li><button class="dropdown-item" type="button">Total Weight: Check-in baggage - up to 5lb
                                  || 20.39 USD</button></li>
                            </ul> -->
                            <button class="addon_btn_drop" (click)="$event.preventDefault()">
                              Total Weight: Check-in baggage - up to 3lb || 16.39 USD
                            </button>
                          </div>
                        </div>
                        <div class="tab-pane fade" id="boarding" role="tabpanel" aria-labelledby="boarding-tab">
                        </div>
                        <div class="tab-pane fade" id="insurance" role="tabpanel" aria-labelledby="insurance-tab">.bbbb
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="travelers.type1.adults.length>0 && cartNumber==1" formGroupName="type1">
    <div formArrayName="adults">
      <div id="accordion" class="accordion_bookings">
        <div class="card" *ngFor="let traveler of travelerForm.get('type1.adults')['controls']; let x = index">
          <div class="card-header">
            <a class="card-link" data-toggle="collapse" [href]="'#adult_collapse'+x" aria-expanded="false">
              Booking Traveler{{cartNumber}} {{x+1}}
            </a>
          </div>
          <div [id]="'adult_collapse'+x" class="collapse show" data-parent="#accordion">
            <div class="card-body">
              <div class="sub_cat_wrapper">
                <a href="javascript:void(0);" class="add_btn_lined">Add Adult (Over 12)</a>
                <a href="javascript:void(0);" class="add_btn_lined">Add Child (2-12)</a>
                <a href="javascript:void(0);" class="add_btn_lined">Add Infant (Under 12)</a>
              </div>
              <app-my-traveler travelerId={{travelers.type1.adults[traveler_number].userId}} traveler_type={{traveler.controls.type.value}} traveler_number={{x}}></app-my-traveler>

              <div [formGroupName]="x" class="common_form">
                <div class="form-row">
                  <div class="col-sm-12 col-md-4 mb-sm-10">
                    <label for="">First Name*</label>
                    <input type="text" class="form-control" placeholder="Name" formControlName="first_name">
                    <div *ngIf="traveler.controls.first_name.touched && traveler.controls.first_name.errors"
                      class="error">
                      <small *ngIf="traveler.controls.first_name.errors.required" class="error_field">Your name is
                        required</small>
                    </div>
                  </div>
                  <div class="col-sm-12 col-md-4 mb-sm-10">
                    <label for="">Last Name*</label>
                    <input type="text" class="form-control" placeholder="Name" formControlName="last_name">
                  </div>

                  <div class="col-sm-12 col-md-4 mb-sm-10">
                    <label for="">Gender*</label>
                    <select class="form-control" formControlName="gender">
                      <option>Male</option>
                      <option>Female</option>
                    </select>
                  </div>
                </div>
                <div class="form-row mt-3">
                  <div class="col-sm-12 col-md-4 mb-sm-10">
                    <label for="">Email*</label>
                    <input type="email" class="form-control" placeholder="Email" formControlName="email">
                  </div>
                  <div class="col-sm-12 col-md-4 mb-sm-10">
                    <label for="">Telephone*</label>
                    <input type="text" class="form-control" placeholder="Telephone" formControlName="phone_no">
                  </div>
                  <div class="col dobs col-md-4 mb-sm-10">
                    <label for="">Date of birth*</label>
                    <input type="text" class="form-control" placeholder="Date of birth" formControlName="dob">
                  </div>
                </div>
                <div class="form-row mt-3 mb-sm-10">
                  <div class="col-sm-12 col-md-4" *ngIf="travelers.type1?.adults[x]?.passport_number">
                    <label for="">Passport number</label>
                    <input type="text" class="form-control" placeholder="Passport number"
                      formControlName="passport_number">
                  </div>
                  <div class="col-sm-12 col-md-4">
                    <label for="">Nationality*</label>
                    <input type="text" class="form-control" placeholder="Nationality" formControlName="country_code">
                  </div>
                </div>
              </div>

              <div id="accordion_add" class="accordion_addn">
                <div class="card">
                  <div class="card-header">
                    <span class="heade_wrps">
                      Add-Ons
                      <a data-toggle="collapse" data-parent="#accordion_add" href="#add_acord"
                        class="addon_anchor responsive_anch" aria-expanded="true" aria-controls="add_acord">
                      </a>
                    </span>
                    <ul class="nav nav-pills" id="addon_tab" role="tablist">
                      <li class="nav-item" role="presentation">
                        <a class="nav-link active" id="baggage-tab" data-toggle="tab" href="#baggage" role="tab"
                          aria-controls="baggage" aria-selected="true">Baggage</a>
                      </li>
                      <li class="nav-item disabled" role="presentation">
                        <a class="nav-link" id="boarding-tab" data-toggle="tab" href="#boarding" role="tab"
                          aria-controls="boarding" aria-selected="false">Priority Boarding</a>
                      </li>
                      <li class="nav-item disabled" role="presentation">
                        <a class="nav-link" id="insurance-tab" data-toggle="tab" href="#insurance" role="tab"
                          aria-controls="insurance" aria-selected="false">Insurance</a>
                      </li>
                    </ul>
                    <a data-toggle="collapse" data-parent="#accordion_add" href="#add_acord" class="addon_anchor"
                      aria-expanded="true" aria-controls="add_acord">
                    </a>
                  </div>
                  <div id="add_acord" class="collapse show" data-parent="#accordion_add">
                    <div class="card-body">
                      <div class="tab-content" id="addon_tabContent">
                        <div class="tab-pane fade show active" id="baggage" role="tabpanel"
                          aria-labelledby="baggage-tab">
                          <div class="addon_listins_wrps">
                            <button class="addon_btn_drop" type="button" id="dropdownMenu2" data-toggle="dropdown"
                              aria-expanded="false">
                              Total Weight: Check-in baggage - up to 3lb || 16.39 USD
                            </button>
                            <ul class="dropdown-menu dropdownList" aria-labelledby="dropdownMenu2">
                              <li><button class="dropdown-item" type="button">Total Weight: Check-in baggage - up to 3lb
                                  || 16.39 USD</button></li>
                              <li><button class="dropdown-item" type="button">Total Weight: Check-in baggage - up to 4lb
                                  || 18.39 USD</button></li>
                              <li><button class="dropdown-item" type="button">Total Weight: Check-in baggage - up to 5lb
                                  || 20.39 USD</button></li>
                            </ul>
                          </div>
                        </div>
                        <div class="tab-pane fade" id="boarding" role="tabpanel" aria-labelledby="boarding-tab">
                        </div>
                        <div class="tab-pane fade" id="insurance" role="tabpanel" aria-labelledby="insurance-tab">.bbbb
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</form>