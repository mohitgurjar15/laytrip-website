<div [formGroup]="form">
    <label>{{label}}</label>
    <ng-select [formControlName]="controlName" groupBy="sub_airport" [loading]="loading" id="{{id}}"
        [selectOnTab]="true" [items]="data" bindLabel="display_name" bindValue="display_name" [clearable]="true"
        notFoundText="" loadingText="" (change)="selectEvent($event, id)" (search)="onChangeSearch($event)"
        class="laytrip-input" placeholder="{{ placeHolder }}" [selectableGroup]="true">

        <!-- <ng-template ng-optgroup-tmp let-item="item">
            {{item.code}} {{item.city}},{{item.country}}-{{item.name}}
        </ng-template>
        <ng-template ng-option-tmp let-item="item">
            {{item.code}} {{item.city}},{{item.country}}-{{item.name}}
        </ng-template> -->

        <ng-container>
            <ng-template>
                <div *ngIf="data.sub_airport">
                    <ng-template ng-optgroup-tmp let-item="item">
                        {{item.code}} {{item.city}},{{item.country}}-{{item.name}}
                    </ng-template>
                    <ng-template ng-option-tmp let-item="item">
                        <div *ngFor="let i of item.sub_airport">
                            {{i.code}} {{i.city}},{{i.country}}-{{i.name}}
                        </div>
                    </ng-template>
                </div>
            </ng-template>
            <ng-template ng-optgroup-tmp let-item="item">
                <div *ngIf="!data.sub_airport">
                    {{item.code}} {{item.city}},{{item.country}}-{{item.name}}
                </div>
            </ng-template>
        </ng-container>

        <ng-template ng-label-tmp let-item="item">
            {{item.city}}
        </ng-template>
    </ng-select>
    <span *ngIf="defaultSelected;else selectedAirport">{{ defaultSelected }}</span>
    <ng-template #selectedAirport>
        <span *ngIf="selectedAirport">{{ selectedAirport.code}}{{selectedAirport.country}}</span>
    </ng-template>
</div>